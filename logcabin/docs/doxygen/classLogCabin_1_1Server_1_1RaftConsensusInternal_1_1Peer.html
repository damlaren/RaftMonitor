<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>LogCabin: LogCabin::Server::RaftConsensusInternal::Peer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LogCabin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceLogCabin.html">LogCabin</a></li><li class="navelem"><a class="el" href="namespaceLogCabin_1_1Server.html">Server</a></li><li class="navelem"><a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html">RaftConsensusInternal</a></li><li class="navelem"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html">Peer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LogCabin::Server::RaftConsensusInternal::Peer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents another server in the cluster.  
 <a href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for LogCabin::Server::RaftConsensusInternal::Peer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.png" usemap="#LogCabin::Server::RaftConsensusInternal::Peer_map" alt=""/>
  <map id="LogCabin::Server::RaftConsensusInternal::Peer_map" name="LogCabin::Server::RaftConsensusInternal::Peer_map">
<area href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s..." alt="LogCabin::Server::RaftConsensusInternal::Server" shape="rect" coords="0,0,288,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab658a5a52b9183a271843a5279d31ac9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#ab658a5a52b9183a271843a5279d31ac9">Peer</a> (uint64_t <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#ac1b2d6d134b4c41baf0220a0c6e587b7">serverId</a>, <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html">RaftConsensus</a> &amp;<a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#aab8969e0bf7d7c361908ad13073a6d2d">consensus</a>)</td></tr>
<tr class="memdesc:ab658a5a52b9183a271843a5279d31ac9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ab658a5a52b9183a271843a5279d31ac9">More...</a><br /></td></tr>
<tr class="separator:ab658a5a52b9183a271843a5279d31ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33cb93c3fc8e2aefe48e832b46d27b8f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a33cb93c3fc8e2aefe48e832b46d27b8f">~Peer</a> ()</td></tr>
<tr class="memdesc:a33cb93c3fc8e2aefe48e832b46d27b8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a33cb93c3fc8e2aefe48e832b46d27b8f">More...</a><br /></td></tr>
<tr class="separator:a33cb93c3fc8e2aefe48e832b46d27b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7a24ef9188194eefe118684d66a2ec5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#aa7a24ef9188194eefe118684d66a2ec5">beginRequestVote</a> ()</td></tr>
<tr class="memdesc:aa7a24ef9188194eefe118684d66a2ec5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin requesting the <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a>'s vote in the current election.  <a href="#aa7a24ef9188194eefe118684d66a2ec5">More...</a><br /></td></tr>
<tr class="separator:aa7a24ef9188194eefe118684d66a2ec5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ba27d28751c0c5c12e3670f7055afd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#ad5ba27d28751c0c5c12e3670f7055afd">beginLeadership</a> ()</td></tr>
<tr class="memdesc:ad5ba27d28751c0c5c12e3670f7055afd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Begin replicating to the <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> in the current term.  <a href="#ad5ba27d28751c0c5c12e3670f7055afd">More...</a><br /></td></tr>
<tr class="separator:ad5ba27d28751c0c5c12e3670f7055afd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46d99021b75d28c44c31cbe4fe221001"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a46d99021b75d28c44c31cbe4fe221001">exit</a> ()</td></tr>
<tr class="memdesc:a46d99021b75d28c44c31cbe4fe221001"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inform any threads belonging to this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> to exit.  <a href="#a46d99021b75d28c44c31cbe4fe221001">More...</a><br /></td></tr>
<tr class="separator:a46d99021b75d28c44c31cbe4fe221001"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a60ec5adc78780464eff2eaaf625d86"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a2a60ec5adc78780464eff2eaaf625d86">getLastAckEpoch</a> () const </td></tr>
<tr class="memdesc:a2a60ec5adc78780464eff2eaaf625d86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the latest time this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> acknowledged our current term.  <a href="#a2a60ec5adc78780464eff2eaaf625d86">More...</a><br /></td></tr>
<tr class="separator:a2a60ec5adc78780464eff2eaaf625d86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74f6a5c2c9950c94cf61c1c302f9d84f"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a74f6a5c2c9950c94cf61c1c302f9d84f">getLastAgreeIndex</a> () const </td></tr>
<tr class="memdesc:a74f6a5c2c9950c94cf61c1c302f9d84f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the largest entry ID for which this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> is known to share the same entries up to and including this entry with our log.  <a href="#a74f6a5c2c9950c94cf61c1c302f9d84f">More...</a><br /></td></tr>
<tr class="separator:a74f6a5c2c9950c94cf61c1c302f9d84f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31e4de7206ec311e2bd8e9f912a284d0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a31e4de7206ec311e2bd8e9f912a284d0">haveVote</a> () const </td></tr>
<tr class="memdesc:a31e4de7206ec311e2bd8e9f912a284d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true if this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> has awarded us its vote for this term.  <a href="#a31e4de7206ec311e2bd8e9f912a284d0">More...</a><br /></td></tr>
<tr class="separator:a31e4de7206ec311e2bd8e9f912a284d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81973f60b1302672c5d0c582a4638f4b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a81973f60b1302672c5d0c582a4638f4b">isCaughtUp</a> () const </td></tr>
<tr class="memdesc:a81973f60b1302672c5d0c582a4638f4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return true once this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> is ready to be added to the cluster.  <a href="#a81973f60b1302672c5d0c582a4638f4b">More...</a><br /></td></tr>
<tr class="separator:a81973f60b1302672c5d0c582a4638f4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5daf374d78d59b74c639acef42f8b1e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a5daf374d78d59b74c639acef42f8b1e5">interrupt</a> ()</td></tr>
<tr class="memdesc:a5daf374d78d59b74c639acef42f8b1e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel any outstanding RPCs to this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a>.  <a href="#a5daf374d78d59b74c639acef42f8b1e5">More...</a><br /></td></tr>
<tr class="separator:a5daf374d78d59b74c639acef42f8b1e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cf12a4c6290d1ea99c3e4074fced205"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a8cf12a4c6290d1ea99c3e4074fced205">scheduleHeartbeat</a> ()</td></tr>
<tr class="memdesc:a8cf12a4c6290d1ea99c3e4074fced205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make the next heartbeat <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> happen soon.  <a href="#a8cf12a4c6290d1ea99c3e4074fced205">More...</a><br /></td></tr>
<tr class="separator:a8cf12a4c6290d1ea99c3e4074fced205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c0b6afed998a197d4a538e6a56e589"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#ad7c0b6afed998a197d4a538e6a56e589">callRPC</a> (Protocol::Raft::OpCode opCode, const google::protobuf::Message &amp;request, google::protobuf::Message &amp;response, std::unique_lock&lt; <a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#aa167a7f1729c5e12a748dc4011a3039d">Mutex</a> &gt; &amp;lockGuard)</td></tr>
<tr class="memdesc:ad7c0b6afed998a197d4a538e6a56e589"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute a remote procedure call on the server's <a class="el" href="classLogCabin_1_1Server_1_1RaftService.html">RaftService</a>.  <a href="#ad7c0b6afed998a197d4a538e6a56e589">More...</a><br /></td></tr>
<tr class="separator:ad7c0b6afed998a197d4a538e6a56e589"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64724bf0a6f9aa79c0e5dfc973d8a195"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a64724bf0a6f9aa79c0e5dfc973d8a195">startThread</a> (std::shared_ptr&lt; <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html">Peer</a> &gt; self)</td></tr>
<tr class="memdesc:a64724bf0a6f9aa79c0e5dfc973d8a195"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launch this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html" title="Represents another server in the cluster. ">Peer</a>'s thread, which should run <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html#ac1f0d77d25c59e83ce7c446726292aaa" title="Initiate RPCs to a specific server as necessary. ">RaftConsensus::peerThreadMain</a>.  <a href="#a64724bf0a6f9aa79c0e5dfc973d8a195">More...</a><br /></td></tr>
<tr class="separator:a64724bf0a6f9aa79c0e5dfc973d8a195"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad76e79f05ed4e34288bf168ed931a6cd"><td class="memItemLeft" align="right" valign="top">std::ostream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#ad76e79f05ed4e34288bf168ed931a6cd">dumpToStream</a> (std::ostream &amp;os) const </td></tr>
<tr class="memdesc:ad76e79f05ed4e34288bf168ed931a6cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual method for operator&lt;&lt;.  <a href="#ad76e79f05ed4e34288bf168ed931a6cd">More...</a><br /></td></tr>
<tr class="separator:ad76e79f05ed4e34288bf168ed931a6cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html">LogCabin::Server::RaftConsensusInternal::Server</a></td></tr>
<tr class="memitem:a89339f6c3b0d20e114d6b110ff638ee8 inherit pub_methods_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#a89339f6c3b0d20e114d6b110ff638ee8">Server</a> (uint64_t <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#ac1b2d6d134b4c41baf0220a0c6e587b7">serverId</a>)</td></tr>
<tr class="memdesc:a89339f6c3b0d20e114d6b110ff638ee8 inherit pub_methods_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a89339f6c3b0d20e114d6b110ff638ee8">More...</a><br /></td></tr>
<tr class="separator:a89339f6c3b0d20e114d6b110ff638ee8 inherit pub_methods_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9fd29479452761eeba68d7e577f34d8 inherit pub_methods_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#ae9fd29479452761eeba68d7e577f34d8">~Server</a> ()</td></tr>
<tr class="memdesc:ae9fd29479452761eeba68d7e577f34d8 inherit pub_methods_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#ae9fd29479452761eeba68d7e577f34d8">More...</a><br /></td></tr>
<tr class="separator:ae9fd29479452761eeba68d7e577f34d8 inherit pub_methods_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aab8969e0bf7d7c361908ad13073a6d2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html">RaftConsensus</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#aab8969e0bf7d7c361908ad13073a6d2d">consensus</a></td></tr>
<tr class="memdesc:aab8969e0bf7d7c361908ad13073a6d2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used in startThread.  <a href="#aab8969e0bf7d7c361908ad13073a6d2d">More...</a><br /></td></tr>
<tr class="separator:aab8969e0bf7d7c361908ad13073a6d2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a7df5ec0a4db59fb8c0f0c462fd89ea"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLogCabin_1_1Event_1_1Loop.html">Event::Loop</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a2a7df5ec0a4db59fb8c0f0c462fd89ea">eventLoop</a></td></tr>
<tr class="memdesc:a2a7df5ec0a4db59fb8c0f0c462fd89ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">A reference to the server's event loop, needed to construct new sessions.  <a href="#a2a7df5ec0a4db59fb8c0f0c462fd89ea">More...</a><br /></td></tr>
<tr class="separator:a2a7df5ec0a4db59fb8c0f0c462fd89ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcc06ccb9c33a32eee1503aa5b1ee205"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#afcc06ccb9c33a32eee1503aa5b1ee205">exiting</a></td></tr>
<tr class="memdesc:afcc06ccb9c33a32eee1503aa5b1ee205"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to true when <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a45d9389965055a93871c27c0fa00817f" title="A thread that is used to send RPCs to the follower. ">thread</a> should exit.  <a href="#afcc06ccb9c33a32eee1503aa5b1ee205">More...</a><br /></td></tr>
<tr class="separator:afcc06ccb9c33a32eee1503aa5b1ee205"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4a82cf70a21989f2f59505281647c3f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#ac4a82cf70a21989f2f59505281647c3f">requestVoteDone</a></td></tr>
<tr class="memdesc:ac4a82cf70a21989f2f59505281647c3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set to true if the server has responded to our RequestVote request in the current term, false otherwise.  <a href="#ac4a82cf70a21989f2f59505281647c3f">More...</a><br /></td></tr>
<tr class="separator:ac4a82cf70a21989f2f59505281647c3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57b21af23dcbefa804c9c962591e5025"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a57b21af23dcbefa804c9c962591e5025">haveVote_</a></td></tr>
<tr class="memdesc:a57b21af23dcbefa804c9c962591e5025"><td class="mdescLeft">&#160;</td><td class="mdescRight">See <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a31e4de7206ec311e2bd8e9f912a284d0" title="Return true if this Server has awarded us its vote for this term. ">haveVote()</a>.  <a href="#a57b21af23dcbefa804c9c962591e5025">More...</a><br /></td></tr>
<tr class="separator:a57b21af23dcbefa804c9c962591e5025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50d0b442ca40959e135e45107a8c6c76"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a50d0b442ca40959e135e45107a8c6c76">forceHeartbeat</a></td></tr>
<tr class="memdesc:a50d0b442ca40959e135e45107a8c6c76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates that nextIndex is still a (poor) guess: the leader should send heartbeats to save bandwidth until it finds where the follower's log diverges from its own.  <a href="#a50d0b442ca40959e135e45107a8c6c76">More...</a><br /></td></tr>
<tr class="separator:a50d0b442ca40959e135e45107a8c6c76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a681aed27116449b0ec7705e85f09fd07"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a681aed27116449b0ec7705e85f09fd07">nextIndex</a></td></tr>
<tr class="memdesc:a681aed27116449b0ec7705e85f09fd07"><td class="mdescLeft">&#160;</td><td class="mdescRight">The index of the next entry to send to the follower.  <a href="#a681aed27116449b0ec7705e85f09fd07">More...</a><br /></td></tr>
<tr class="separator:a681aed27116449b0ec7705e85f09fd07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2af3be3d3ac5cfb2c79270d084f01e21"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a2af3be3d3ac5cfb2c79270d084f01e21">lastAgreeIndex</a></td></tr>
<tr class="memdesc:a2af3be3d3ac5cfb2c79270d084f01e21"><td class="mdescLeft">&#160;</td><td class="mdescRight">See <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a74f6a5c2c9950c94cf61c1c302f9d84f" title="Return the largest entry ID for which this Server is known to share the same entries up to and includ...">getLastAgreeIndex()</a>.  <a href="#a2af3be3d3ac5cfb2c79270d084f01e21">More...</a><br /></td></tr>
<tr class="separator:a2af3be3d3ac5cfb2c79270d084f01e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ac99d0f0a94203643ac72cf4e4c0e69"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a3ac99d0f0a94203643ac72cf4e4c0e69">lastAckEpoch</a></td></tr>
<tr class="memdesc:a3ac99d0f0a94203643ac72cf4e4c0e69"><td class="mdescLeft">&#160;</td><td class="mdescRight">See <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a2a60ec5adc78780464eff2eaaf625d86" title="Return the latest time this Server acknowledged our current term. ">getLastAckEpoch()</a>.  <a href="#a3ac99d0f0a94203643ac72cf4e4c0e69">More...</a><br /></td></tr>
<tr class="separator:a3ac99d0f0a94203643ac72cf4e4c0e69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3115d040af27bfe093f1881fd243716"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#a9b2ddcfb6434331d10e3ed84c66e14e3">TimePoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#af3115d040af27bfe093f1881fd243716">nextHeartbeatTime</a></td></tr>
<tr class="memdesc:af3115d040af27bfe093f1881fd243716"><td class="mdescLeft">&#160;</td><td class="mdescRight">When the next heartbeat should be sent to the follower.  <a href="#af3115d040af27bfe093f1881fd243716">More...</a><br /></td></tr>
<tr class="separator:af3115d040af27bfe093f1881fd243716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b6511933a555747a4edf9e4cb9f385c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#a9b2ddcfb6434331d10e3ed84c66e14e3">TimePoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a8b6511933a555747a4edf9e4cb9f385c">backoffUntil</a></td></tr>
<tr class="memdesc:a8b6511933a555747a4edf9e4cb9f385c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The minimum time at which the next <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> should be sent.  <a href="#a8b6511933a555747a4edf9e4cb9f385c">More...</a><br /></td></tr>
<tr class="separator:a8b6511933a555747a4edf9e4cb9f385c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af384128771f7e60f485b837114f56788"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#af384128771f7e60f485b837114f56788">rpcFailuresSinceLastWarning</a></td></tr>
<tr class="memdesc:af384128771f7e60f485b837114f56788"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counts <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> failures to issue fewer warnings.  <a href="#af384128771f7e60f485b837114f56788">More...</a><br /></td></tr>
<tr class="separator:af384128771f7e60f485b837114f56788"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa278a1b1f4db199d22db2077dab0bd1f"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#aa278a1b1f4db199d22db2077dab0bd1f">lastCatchUpIterationMs</a></td></tr>
<tr class="separator:aa278a1b1f4db199d22db2077dab0bd1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee6a46284ffbb597bdaaf4171cca5b6a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#a9b2ddcfb6434331d10e3ed84c66e14e3">TimePoint</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#aee6a46284ffbb597bdaaf4171cca5b6a">thisCatchUpIterationStart</a></td></tr>
<tr class="separator:aee6a46284ffbb597bdaaf4171cca5b6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b1063ab72094143e3e1acdfb531b355"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a0b1063ab72094143e3e1acdfb531b355">thisCatchUpIterationGoalId</a></td></tr>
<tr class="separator:a0b1063ab72094143e3e1acdfb531b355"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa35915b9016d63af612039b1eea9c9bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#aa35915b9016d63af612039b1eea9c9bf">isCaughtUp_</a></td></tr>
<tr class="memdesc:aa35915b9016d63af612039b1eea9c9bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">See <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a81973f60b1302672c5d0c582a4638f4b" title="Return true once this Server is ready to be added to the cluster. ">isCaughtUp()</a>.  <a href="#aa35915b9016d63af612039b1eea9c9bf">More...</a><br /></td></tr>
<tr class="separator:aa35915b9016d63af612039b1eea9c9bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad26b3c377e98b3ae5f0818b7b76908fd"><td class="memItemLeft" align="right" valign="top">std::unique_ptr<br class="typebreak" />
&lt; <a class="el" href="classLogCabin_1_1Storage_1_1FilesystemUtil_1_1FileContents.html">Storage::FilesystemUtil::FileContents</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#ad26b3c377e98b3ae5f0818b7b76908fd">snapshotFile</a></td></tr>
<tr class="memdesc:ad26b3c377e98b3ae5f0818b7b76908fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">A snapshot file to be sent to the follower, or NULL.  <a href="#ad26b3c377e98b3ae5f0818b7b76908fd">More...</a><br /></td></tr>
<tr class="separator:ad26b3c377e98b3ae5f0818b7b76908fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71e8fe01080a5c648184fcada409c56a"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a71e8fe01080a5c648184fcada409c56a">snapshotFileOffset</a></td></tr>
<tr class="memdesc:a71e8fe01080a5c648184fcada409c56a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of bytes of 'snapshotFile' that have been acknowledged by the follower already.  <a href="#a71e8fe01080a5c648184fcada409c56a">More...</a><br /></td></tr>
<tr class="separator:a71e8fe01080a5c648184fcada409c56a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a814e3469c1609f999488037a01087c"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a4a814e3469c1609f999488037a01087c">lastSnapshotIndex</a></td></tr>
<tr class="memdesc:a4a814e3469c1609f999488037a01087c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The last log index that 'snapshotFile' corresponds to.  <a href="#a4a814e3469c1609f999488037a01087c">More...</a><br /></td></tr>
<tr class="separator:a4a814e3469c1609f999488037a01087c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td colspan="2" onclick="javascript:toggleInherit('pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server')"><img src="closed.png" alt="-"/>&#160;Public Attributes inherited from <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html">LogCabin::Server::RaftConsensusInternal::Server</a></td></tr>
<tr class="memitem:ac1b2d6d134b4c41baf0220a0c6e587b7 inherit pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memItemLeft" align="right" valign="top">const uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#ac1b2d6d134b4c41baf0220a0c6e587b7">serverId</a></td></tr>
<tr class="memdesc:ac1b2d6d134b4c41baf0220a0c6e587b7 inherit pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ID of this server.  <a href="#ac1b2d6d134b4c41baf0220a0c6e587b7">More...</a><br /></td></tr>
<tr class="separator:ac1b2d6d134b4c41baf0220a0c6e587b7 inherit pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cd1eab8f828c439da51796044ad6451 inherit pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#a0cd1eab8f828c439da51796044ad6451">address</a></td></tr>
<tr class="memdesc:a0cd1eab8f828c439da51796044ad6451 inherit pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="mdescLeft">&#160;</td><td class="mdescRight">The network address at which this server may be available.  <a href="#a0cd1eab8f828c439da51796044ad6451">More...</a><br /></td></tr>
<tr class="separator:a0cd1eab8f828c439da51796044ad6451 inherit pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9208d78c7fa30913a15d27fd58a57c54 inherit pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#a9208d78c7fa30913a15d27fd58a57c54">gcFlag</a></td></tr>
<tr class="memdesc:a9208d78c7fa30913a15d27fd58a57c54 inherit pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used internally by <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Configuration.html" title="A configuration defines the servers that are part of the cluster. ">Configuration</a> for garbage collection.  <a href="#a9208d78c7fa30913a15d27fd58a57c54">More...</a><br /></td></tr>
<tr class="separator:a9208d78c7fa30913a15d27fd58a57c54 inherit pub_attribs_classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a3e688557bfc2d99836ae83fe7ccd8145"><td class="memItemLeft" align="right" valign="top">std::shared_ptr<br class="typebreak" />
&lt; <a class="el" href="classLogCabin_1_1RPC_1_1ClientSession.html">RPC::ClientSession</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a3e688557bfc2d99836ae83fe7ccd8145">getSession</a> (std::unique_lock&lt; <a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#aa167a7f1729c5e12a748dc4011a3039d">Mutex</a> &gt; &amp;lockGuard)</td></tr>
<tr class="memdesc:a3e688557bfc2d99836ae83fe7ccd8145"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current session for this server.  <a href="#a3e688557bfc2d99836ae83fe7ccd8145">More...</a><br /></td></tr>
<tr class="separator:a3e688557bfc2d99836ae83fe7ccd8145"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3f110dd07cc42df6d777065edf063b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a9f3f110dd07cc42df6d777065edf063b">Peer</a> (const <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html">Peer</a> &amp;)=delete</td></tr>
<tr class="separator:a9f3f110dd07cc42df6d777065edf063b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a385dc0a6aa12e6c1d1e0b88bdb850d4a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html">Peer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a385dc0a6aa12e6c1d1e0b88bdb850d4a">operator=</a> (const <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html">Peer</a> &amp;)=delete</td></tr>
<tr class="separator:a385dc0a6aa12e6c1d1e0b88bdb850d4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a16744a8ac76825923b7bd86625aa26c8"><td class="memItemLeft" align="right" valign="top">std::shared_ptr<br class="typebreak" />
&lt; <a class="el" href="classLogCabin_1_1RPC_1_1ClientSession.html">RPC::ClientSession</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a16744a8ac76825923b7bd86625aa26c8">session</a></td></tr>
<tr class="memdesc:a16744a8ac76825923b7bd86625aa26c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Caches the result of <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a3e688557bfc2d99836ae83fe7ccd8145" title="Get the current session for this server. ">getSession()</a>.  <a href="#a16744a8ac76825923b7bd86625aa26c8">More...</a><br /></td></tr>
<tr class="separator:a16744a8ac76825923b7bd86625aa26c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6152a1441ad8d36900beae23b8adb231"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLogCabin_1_1RPC_1_1ClientRPC.html">RPC::ClientRPC</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a6152a1441ad8d36900beae23b8adb231">rpc</a></td></tr>
<tr class="memdesc:a6152a1441ad8d36900beae23b8adb231"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#ad7c0b6afed998a197d4a538e6a56e589" title="Execute a remote procedure call on the server&#39;s RaftService. ">callRPC()</a> places its <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> here so that <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a5daf374d78d59b74c639acef42f8b1e5" title="Cancel any outstanding RPCs to this Server. ">interrupt()</a> may cancel it.  <a href="#a6152a1441ad8d36900beae23b8adb231">More...</a><br /></td></tr>
<tr class="separator:a6152a1441ad8d36900beae23b8adb231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45d9389965055a93871c27c0fa00817f"><td class="memItemLeft" align="right" valign="top">std::thread&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a45d9389965055a93871c27c0fa00817f">thread</a></td></tr>
<tr class="memdesc:a45d9389965055a93871c27c0fa00817f"><td class="mdescLeft">&#160;</td><td class="mdescRight">A thread that is used to send RPCs to the follower.  <a href="#a45d9389965055a93871c27c0fa00817f">More...</a><br /></td></tr>
<tr class="separator:a45d9389965055a93871c27c0fa00817f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Represents another server in the cluster. </p>
<p>One of these exists for each other server. In addition to tracking state for each other server, this class provides a thread that executes <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html#ac1f0d77d25c59e83ce7c446726292aaa" title="Initiate RPCs to a specific server as necessary. ">RaftConsensus::peerThreadMain()</a>.</p>
<p>This class has no internal locking: in general, the <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html" title="An implementation of the Raft consensus algorithm. ">RaftConsensus</a> lock should be held when accessing this class, but there are some exceptions noted below. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00231">231</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab658a5a52b9183a271843a5279d31ac9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LogCabin::Server::RaftConsensusInternal::Peer::Peer </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>serverId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html">RaftConsensus</a> &amp;&#160;</td>
          <td class="paramname"><em>consensus</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00142">142</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a33cb93c3fc8e2aefe48e832b46d27b8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LogCabin::Server::RaftConsensusInternal::Peer::~Peer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00174">174</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a9f3f110dd07cc42df6d777065edf063b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LogCabin::Server::RaftConsensusInternal::Peer::Peer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html">Peer</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa7a24ef9188194eefe118684d66a2ec5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LogCabin::Server::RaftConsensusInternal::Peer::beginRequestVote </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Begin requesting the <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a>'s vote in the current election. </p>
<p>Return immediately. The condition variable in <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html" title="An implementation of the Raft consensus algorithm. ">RaftConsensus</a> will be notified separately. </p>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#aab43402fe28b4fac77a2a53da7f7c779">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00179">179</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ad5ba27d28751c0c5c12e3670f7055afd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LogCabin::Server::RaftConsensusInternal::Peer::beginLeadership </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Begin replicating to the <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> in the current term. </p>
<p>Return immediately. The condition variable in <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html" title="An implementation of the Raft consensus algorithm. ">RaftConsensus</a> will be notified separately. </p>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#ad03f113b797b25406325dde9bcf78fb2">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00186">186</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a46d99021b75d28c44c31cbe4fe221001"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LogCabin::Server::RaftConsensusInternal::Peer::exit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inform any threads belonging to this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> to exit. </p>
<p>Return immediately. The condition variable in <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html" title="An implementation of the Raft consensus algorithm. ">RaftConsensus</a> will be notified separately. </p>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#ae4af8d452636e4d3fada9eb686416143">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00197">197</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a2a60ec5adc78780464eff2eaaf625d86"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::getLastAckEpoch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the latest time this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> acknowledged our current term. </p>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#a78554a4aaedbe99eca7dbb652b0ba355">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00203">203</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a74f6a5c2c9950c94cf61c1c302f9d84f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::getLastAgreeIndex </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the largest entry ID for which this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> is known to share the same entries up to and including this entry with our log. </p>
<p>This is used for advancing the leader's commitIndex. Monotonically increases within a term.</p>
<dl class="section warning"><dt>Warning</dt><dd>Only valid when we're leader. </dd></dl>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#ab54a3a7c21b87f7d0b93babbbbc3d00a">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00209">209</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a31e4de7206ec311e2bd8e9f912a284d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LogCabin::Server::RaftConsensusInternal::Peer::haveVote </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true if this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> has awarded us its vote for this term. </p>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#a0651a28c215025bab21d9617b20544ff">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00215">215</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a81973f60b1302672c5d0c582a4638f4b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool LogCabin::Server::RaftConsensusInternal::Peer::isCaughtUp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return true once this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a> is ready to be added to the cluster. </p>
<p>This means it has received enough of our log to where it is not expected to cause an availability problem when added to the cluster configuration. Should monotonically change from false to true. </p>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#abaabd1bf45eefc51e4d99548a2c71eb1">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00227">227</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a5daf374d78d59b74c639acef42f8b1e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LogCabin::Server::RaftConsensusInternal::Peer::interrupt </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cancel any outstanding RPCs to this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html" title="A base class for known servers in the cluster, including this process (see LocalServer) and others (s...">Server</a>. </p>
<p>The condition variable in <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html" title="An implementation of the Raft consensus algorithm. ">RaftConsensus</a> will be notified separately. </p>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#af56e0aa8cbf6377047a1737c461e84e9">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00221">221</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a8cf12a4c6290d1ea99c3e4074fced205"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void LogCabin::Server::RaftConsensusInternal::Peer::scheduleHeartbeat </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Make the next heartbeat <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> happen soon. </p>
<p>Return immediately. The condition variable in <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html" title="An implementation of the Raft consensus algorithm. ">RaftConsensus</a> will be notified separately. </p>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#a33c58fbb1b5f1b39cfd9cd941ab2b153">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00233">233</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ad7c0b6afed998a197d4a538e6a56e589"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LogCabin::Server::RaftConsensusInternal::Peer::callRPC </td>
          <td>(</td>
          <td class="paramtype">Protocol::Raft::OpCode&#160;</td>
          <td class="paramname"><em>opCode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const google::protobuf::Message &amp;&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">google::protobuf::Message &amp;&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unique_lock&lt; <a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#aa167a7f1729c5e12a748dc4011a3039d">Mutex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lockGuard</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute a remote procedure call on the server's <a class="el" href="classLogCabin_1_1Server_1_1RaftService.html">RaftService</a>. </p>
<p>As this operation might take a while, it should be called without <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html" title="An implementation of the Raft consensus algorithm. ">RaftConsensus</a> lock. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">opCode</td><td>The <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> opcode to execute (see Protocol::Raft::OpCode). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">request</td><td>The request that was received from the other server. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">response</td><td>Where the reply should be placed. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">lockGuard</td><td>The Raft lock, which is released internally to allow for I/O concurrency. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if the <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> succeeded and the response was filled in; false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00239">239</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a64724bf0a6f9aa79c0e5dfc973d8a195"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LogCabin::Server::RaftConsensusInternal::Peer::startThread </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html">Peer</a> &gt;&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Launch this <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html" title="Represents another server in the cluster. ">Peer</a>'s thread, which should run <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html#ac1f0d77d25c59e83ce7c446726292aaa" title="Initiate RPCs to a specific server as necessary. ">RaftConsensus::peerThreadMain</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>A shared_ptr to this object, which the detached thread uses to make sure this object doesn't go away. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00277">277</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="ad76e79f05ed4e34288bf168ed931a6cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::ostream &amp; LogCabin::Server::RaftConsensusInternal::Peer::dumpToStream </td>
          <td>(</td>
          <td class="paramtype">std::ostream &amp;&#160;</td>
          <td class="paramname"><em>os</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Virtual method for operator&lt;&lt;. </p>

<p>Implements <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Server.html#a671550310e27d14b8253800119a8ed72">LogCabin::Server::RaftConsensusInternal::Server</a>.</p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00301">301</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a3e688557bfc2d99836ae83fe7ccd8145"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; <a class="el" href="classLogCabin_1_1RPC_1_1ClientSession.html">RPC::ClientSession</a> &gt; LogCabin::Server::RaftConsensusInternal::Peer::getSession </td>
          <td>(</td>
          <td class="paramtype">std::unique_lock&lt; <a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#aa167a7f1729c5e12a748dc4011a3039d">Mutex</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>lockGuard</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the current session for this server. </p>
<p>(This is cached in the <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a16744a8ac76825923b7bd86625aa26c8" title="Caches the result of getSession(). ">session</a> member for efficiency.) As this operation might take a while, it should be called without <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html" title="An implementation of the Raft consensus algorithm. ">RaftConsensus</a> lock. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8cc_source.html#l00287">287</a> of file <a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a385dc0a6aa12e6c1d1e0b88bdb850d4a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html">Peer</a>&amp; LogCabin::Server::RaftConsensusInternal::Peer::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html">Peer</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aab8969e0bf7d7c361908ad13073a6d2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1RaftConsensus.html">RaftConsensus</a>&amp; LogCabin::Server::RaftConsensusInternal::Peer::consensus</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used in startThread. </p>
<p>TODO(ongaro): reconsider </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00303">303</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2a7df5ec0a4db59fb8c0f0c462fd89ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLogCabin_1_1Event_1_1Loop.html">Event::Loop</a>&amp; LogCabin::Server::RaftConsensusInternal::Peer::eventLoop</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A reference to the server's event loop, needed to construct new sessions. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00309">309</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="afcc06ccb9c33a32eee1503aa5b1ee205"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LogCabin::Server::RaftConsensusInternal::Peer::exiting</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set to true when <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a45d9389965055a93871c27c0fa00817f" title="A thread that is used to send RPCs to the follower. ">thread</a> should exit. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00314">314</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="ac4a82cf70a21989f2f59505281647c3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LogCabin::Server::RaftConsensusInternal::Peer::requestVoteDone</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set to true if the server has responded to our RequestVote request in the current term, false otherwise. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00320">320</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a57b21af23dcbefa804c9c962591e5025"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LogCabin::Server::RaftConsensusInternal::Peer::haveVote_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>See <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a31e4de7206ec311e2bd8e9f912a284d0" title="Return true if this Server has awarded us its vote for this term. ">haveVote()</a>. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00325">325</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a50d0b442ca40959e135e45107a8c6c76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LogCabin::Server::RaftConsensusInternal::Peer::forceHeartbeat</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates that nextIndex is still a (poor) guess: the leader should send heartbeats to save bandwidth until it finds where the follower's log diverges from its own. </p>
<p>Only used when leader. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00332">332</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a681aed27116449b0ec7705e85f09fd07"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::nextIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The index of the next entry to send to the follower. </p>
<p>Only used when leader. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00338">338</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2af3be3d3ac5cfb2c79270d084f01e21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::lastAgreeIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>See <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a74f6a5c2c9950c94cf61c1c302f9d84f" title="Return the largest entry ID for which this Server is known to share the same entries up to and includ...">getLastAgreeIndex()</a>. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00343">343</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3ac99d0f0a94203643ac72cf4e4c0e69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::lastAckEpoch</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>See <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a2a60ec5adc78780464eff2eaaf625d86" title="Return the latest time this Server acknowledged our current term. ">getLastAckEpoch()</a>. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00348">348</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="af3115d040af27bfe093f1881fd243716"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#a9b2ddcfb6434331d10e3ed84c66e14e3">TimePoint</a> LogCabin::Server::RaftConsensusInternal::Peer::nextHeartbeatTime</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>When the next heartbeat should be sent to the follower. </p>
<p>Only valid while we're leader. The leader sends heartbeats periodically if it has no new data to send, to stop the follower from starting a new election. </p><dl class="section invariant"><dt>Invariant</dt><dd>This is never more than HEARTBEAT_PERIOD_MS in the future, since new leaders don't reset it. </dd></dl>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00359">359</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8b6511933a555747a4edf9e4cb9f385c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#a9b2ddcfb6434331d10e3ed84c66e14e3">TimePoint</a> LogCabin::Server::RaftConsensusInternal::Peer::backoffUntil</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The minimum time at which the next <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> should be sent. </p>
<p>Only valid while we're a candidate or leader. This is set when an <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> fails so as to not overwhelm the network with retries (some RPCs fail without timing out, for example if the remote kernel rejects the connection). </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00368">368</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="af384128771f7e60f485b837114f56788"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::rpcFailuresSinceLastWarning</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Counts <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> failures to issue fewer warnings. </p>
<p>Accessed only from <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#ad7c0b6afed998a197d4a538e6a56e589" title="Execute a remote procedure call on the server&#39;s RaftService. ">callRPC()</a> without holding the lock. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00374">374</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa278a1b1f4db199d22db2077dab0bd1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::lastCatchUpIterationMs</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00377">377</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="aee6a46284ffbb597bdaaf4171cca5b6a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespaceLogCabin_1_1Server_1_1RaftConsensusInternal.html#a9b2ddcfb6434331d10e3ed84c66e14e3">TimePoint</a> LogCabin::Server::RaftConsensusInternal::Peer::thisCatchUpIterationStart</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00378">378</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0b1063ab72094143e3e1acdfb531b355"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::thisCatchUpIterationGoalId</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00379">379</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa35915b9016d63af612039b1eea9c9bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool LogCabin::Server::RaftConsensusInternal::Peer::isCaughtUp_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>See <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a81973f60b1302672c5d0c582a4638f4b" title="Return true once this Server is ready to be added to the cluster. ">isCaughtUp()</a>. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00384">384</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad26b3c377e98b3ae5f0818b7b76908fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classLogCabin_1_1Storage_1_1FilesystemUtil_1_1FileContents.html">Storage::FilesystemUtil::FileContents</a>&gt; LogCabin::Server::RaftConsensusInternal::Peer::snapshotFile</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A snapshot file to be sent to the follower, or NULL. </p>
<p>TODO(ongaro): It'd be better to destroy this as soon as this server steps down, but peers don't have a hook for that right now. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00391">391</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a71e8fe01080a5c648184fcada409c56a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::snapshotFileOffset</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of bytes of 'snapshotFile' that have been acknowledged by the follower already. </p>
<p>Send starting here next time. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00396">396</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a4a814e3469c1609f999488037a01087c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t LogCabin::Server::RaftConsensusInternal::Peer::lastSnapshotIndex</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The last log index that 'snapshotFile' corresponds to. </p>
<p>This is used to set the follower's <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a681aed27116449b0ec7705e85f09fd07" title="The index of the next entry to send to the follower. ">nextIndex</a> accordingly after we're done sending it the snapshot. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00402">402</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a16744a8ac76825923b7bd86625aa26c8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="classLogCabin_1_1RPC_1_1ClientSession.html">RPC::ClientSession</a>&gt; LogCabin::Server::RaftConsensusInternal::Peer::session</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Caches the result of <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a3e688557bfc2d99836ae83fe7ccd8145" title="Get the current session for this server. ">getSession()</a>. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00409">409</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6152a1441ad8d36900beae23b8adb231"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLogCabin_1_1RPC_1_1ClientRPC.html">RPC::ClientRPC</a> LogCabin::Server::RaftConsensusInternal::Peer::rpc</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#ad7c0b6afed998a197d4a538e6a56e589" title="Execute a remote procedure call on the server&#39;s RaftService. ">callRPC()</a> places its <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> here so that <a class="el" href="classLogCabin_1_1Server_1_1RaftConsensusInternal_1_1Peer.html#a5daf374d78d59b74c639acef42f8b1e5" title="Cancel any outstanding RPCs to this Server. ">interrupt()</a> may cancel it. </p>
<p>Setting this member and canceling the <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> must be done while holding the Raft lock; waiting on the <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> is done without holding that lock. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00416">416</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<a class="anchor" id="a45d9389965055a93871c27c0fa00817f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::thread LogCabin::Server::RaftConsensusInternal::Peer::thread</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A thread that is used to send RPCs to the follower. </p>

<p>Definition at line <a class="el" href="RaftConsensus_8h_source.html#l00421">421</a> of file <a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>Server/<a class="el" href="RaftConsensus_8h_source.html">RaftConsensus.h</a></li>
<li>Server/<a class="el" href="RaftConsensus_8cc_source.html">RaftConsensus.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 14 2014 13:49:45 for LogCabin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
