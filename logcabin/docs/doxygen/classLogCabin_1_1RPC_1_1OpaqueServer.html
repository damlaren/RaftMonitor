<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>LogCabin: LogCabin::RPC::OpaqueServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">LogCabin
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceLogCabin.html">LogCabin</a></li><li class="navelem"><a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a></li><li class="navelem"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html">OpaqueServer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classLogCabin_1_1RPC_1_1OpaqueServer-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">LogCabin::RPC::OpaqueServer Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>An <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html" title="An OpaqueServer listens for incoming RPCs over TCP connections. ">OpaqueServer</a> listens for incoming RPCs over TCP connections.  
 <a href="classLogCabin_1_1RPC_1_1OpaqueServer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="OpaqueServer_8h_source.html">OpaqueServer.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for LogCabin::RPC::OpaqueServer:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classLogCabin_1_1RPC_1_1OpaqueServer.png" usemap="#LogCabin::RPC::OpaqueServer_map" alt=""/>
  <map id="LogCabin::RPC::OpaqueServer_map" name="LogCabin::RPC::OpaqueServer_map">
<area href="classLogCabin_1_1RPC_1_1Server.html" title="A Server listens for incoming RPCs over TCP connections and dispatches these to Services. " alt="LogCabin::RPC::Server" shape="rect" coords="0,56,186,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerMessageSocket.html">ServerMessageSocket</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a <a class="el" href="classLogCabin_1_1RPC_1_1MessageSocket.html" title="A MessageSocket is a message-oriented layer on top of a TCP connection. ">MessageSocket</a> with callbacks set up for <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html" title="An OpaqueServer listens for incoming RPCs over TCP connections. ">OpaqueServer</a>.  <a href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerMessageSocket.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerTCPListener.html">ServerTCPListener</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This listens for incoming TCP connections and creates new ServerMessageSockets with new connections.  <a href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerTCPListener.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8ce2ff5f64a1f716ca931aa467750694"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#a8ce2ff5f64a1f716ca931aa467750694">OpaqueServer</a> (<a class="el" href="classLogCabin_1_1Event_1_1Loop.html">Event::Loop</a> &amp;<a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#ab2e0da8ed3e967fc08db7cd871fbc3f9">eventLoop</a>, uint32_t <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#acb2edeca2b4c9adaeb9c2d12f78e70d7">maxMessageLength</a>)</td></tr>
<tr class="memdesc:a8ce2ff5f64a1f716ca931aa467750694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a8ce2ff5f64a1f716ca931aa467750694">More...</a><br /></td></tr>
<tr class="separator:a8ce2ff5f64a1f716ca931aa467750694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bc28f1cd088c9dac15a725af4a7ebab"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#a4bc28f1cd088c9dac15a725af4a7ebab">~OpaqueServer</a> ()</td></tr>
<tr class="memdesc:a4bc28f1cd088c9dac15a725af4a7ebab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a4bc28f1cd088c9dac15a725af4a7ebab">More...</a><br /></td></tr>
<tr class="separator:a4bc28f1cd088c9dac15a725af4a7ebab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8b06de44eef3df7e5f0091ebcc4984e"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#ae8b06de44eef3df7e5f0091ebcc4984e">bind</a> (const <a class="el" href="classLogCabin_1_1RPC_1_1Address.html">Address</a> &amp;listenAddress)</td></tr>
<tr class="memdesc:ae8b06de44eef3df7e5f0091ebcc4984e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Listen on an address for new client connections.  <a href="#ae8b06de44eef3df7e5f0091ebcc4984e">More...</a><br /></td></tr>
<tr class="separator:ae8b06de44eef3df7e5f0091ebcc4984e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b02711a907427c9b50fe14bee8c33fa"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#a4b02711a907427c9b50fe14bee8c33fa">handleRPC</a> (<a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServerRPC.html">OpaqueServerRPC</a> serverRPC)=0</td></tr>
<tr class="memdesc:a4b02711a907427c9b50fe14bee8c33fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">This method is overridden by a subclass and invoked when a new <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> arrives.  <a href="#a4b02711a907427c9b50fe14bee8c33fa">More...</a><br /></td></tr>
<tr class="separator:a4b02711a907427c9b50fe14bee8c33fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ab2e0da8ed3e967fc08db7cd871fbc3f9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLogCabin_1_1Event_1_1Loop.html">Event::Loop</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#ab2e0da8ed3e967fc08db7cd871fbc3f9">eventLoop</a></td></tr>
<tr class="memdesc:ab2e0da8ed3e967fc08db7cd871fbc3f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The event loop that is used for non-blocking I/O.  <a href="#ab2e0da8ed3e967fc08db7cd871fbc3f9">More...</a><br /></td></tr>
<tr class="separator:ab2e0da8ed3e967fc08db7cd871fbc3f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:abea115949ab8b5cf0c257b01878320fe"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#abea115949ab8b5cf0c257b01878320fe">OpaqueServer</a> (const <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html">OpaqueServer</a> &amp;)=delete</td></tr>
<tr class="separator:abea115949ab8b5cf0c257b01878320fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe3567a5bb7c6c4f3742abf27161a58"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html">OpaqueServer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#a4fe3567a5bb7c6c4f3742abf27161a58">operator=</a> (const <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html">OpaqueServer</a> &amp;)=delete</td></tr>
<tr class="separator:a4fe3567a5bb7c6c4f3742abf27161a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:acb2edeca2b4c9adaeb9c2d12f78e70d7"><td class="memItemLeft" align="right" valign="top">const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#acb2edeca2b4c9adaeb9c2d12f78e70d7">maxMessageLength</a></td></tr>
<tr class="memdesc:acb2edeca2b4c9adaeb9c2d12f78e70d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">The maximum number of bytes to allow per request/response.  <a href="#acb2edeca2b4c9adaeb9c2d12f78e70d7">More...</a><br /></td></tr>
<tr class="separator:acb2edeca2b4c9adaeb9c2d12f78e70d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a1d2a9cc624a8562907fd2535374c66"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::shared_ptr<br class="typebreak" />
&lt; <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerMessageSocket.html">ServerMessageSocket</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#a7a1d2a9cc624a8562907fd2535374c66">sockets</a></td></tr>
<tr class="memdesc:a7a1d2a9cc624a8562907fd2535374c66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Every open <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerMessageSocket.html" title="This is a MessageSocket with callbacks set up for OpaqueServer. ">ServerMessageSocket</a> is referenced here so that it can be cleaned up when this <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html" title="An OpaqueServer listens for incoming RPCs over TCP connections. ">OpaqueServer</a> is destroyed.  <a href="#a7a1d2a9cc624a8562907fd2535374c66">More...</a><br /></td></tr>
<tr class="separator:a7a1d2a9cc624a8562907fd2535374c66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7af714c3605d8d1079e9c9a69128b88e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerTCPListener.html">ServerTCPListener</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#a7af714c3605d8d1079e9c9a69128b88e">listener</a></td></tr>
<tr class="memdesc:a7af714c3605d8d1079e9c9a69128b88e"><td class="mdescLeft">&#160;</td><td class="mdescRight">This listens for incoming TCP connections and accepts them.  <a href="#a7af714c3605d8d1079e9c9a69128b88e">More...</a><br /></td></tr>
<tr class="separator:a7af714c3605d8d1079e9c9a69128b88e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a5af59d657d441cad39e66b2799c9efe0"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#a5af59d657d441cad39e66b2799c9efe0">OpaqueServerRPC</a></td></tr>
<tr class="memdesc:a5af59d657d441cad39e66b2799c9efe0"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServerRPC.html" title="This class represents the server side of a remote procedure call. ">OpaqueServerRPC</a> keeps a std::weak_ptr back to its originating <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerMessageSocket.html" title="This is a MessageSocket with callbacks set up for OpaqueServer. ">ServerMessageSocket</a>.  <a href="#a5af59d657d441cad39e66b2799c9efe0">More...</a><br /></td></tr>
<tr class="separator:a5af59d657d441cad39e66b2799c9efe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html" title="An OpaqueServer listens for incoming RPCs over TCP connections. ">OpaqueServer</a> listens for incoming RPCs over TCP connections. </p>
<p>OpaqueServers can be created from any thread, but they will always run on the thread running the <a class="el" href="classLogCabin_1_1Event_1_1Loop.html" title="This class contains an event loop based on Linux&#39;s epoll interface. ">Event::Loop</a>. </p>

<p>Definition at line <a class="el" href="OpaqueServer_8h_source.html#l00043">43</a> of file <a class="el" href="OpaqueServer_8h_source.html">OpaqueServer.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a8ce2ff5f64a1f716ca931aa467750694"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LogCabin::RPC::OpaqueServer::OpaqueServer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLogCabin_1_1Event_1_1Loop.html">Event::Loop</a> &amp;&#160;</td>
          <td class="paramname"><em>eventLoop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>maxMessageLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>This object won't actually do anything until <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html#ae8b06de44eef3df7e5f0091ebcc4984e" title="Listen on an address for new client connections. ">bind()</a> is called. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">eventLoop</td><td><a class="el" href="classLogCabin_1_1Event_1_1Loop.html" title="This class contains an event loop based on Linux&#39;s epoll interface. ">Event::Loop</a> that will be used to find out when the underlying socket may be read from or written to without blocking. </td></tr>
    <tr><td class="paramname">maxMessageLength</td><td>The maximum number of bytes to allow per request/response. This exists to limit the amount of buffer space a single <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> can use. Attempting to send longer responses will PANIC; attempting to receive longer requests will disconnect the underlying socket. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="OpaqueServer_8cc_source.html#l00111">111</a> of file <a class="el" href="OpaqueServer_8cc_source.html">OpaqueServer.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a4bc28f1cd088c9dac15a725af4a7ebab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LogCabin::RPC::OpaqueServer::~OpaqueServer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>
<p><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServerRPC.html" title="This class represents the server side of a remote procedure call. ">OpaqueServerRPC</a> objects originating from this <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html" title="An OpaqueServer listens for incoming RPCs over TCP connections. ">OpaqueServer</a> may be kept around after this destructor returns; however, they won't actually send replies anymore. </p>

<p>Definition at line <a class="el" href="OpaqueServer_8cc_source.html#l00120">120</a> of file <a class="el" href="OpaqueServer_8cc_source.html">OpaqueServer.cc</a>.</p>

</div>
</div>
<a class="anchor" id="abea115949ab8b5cf0c257b01878320fe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">LogCabin::RPC::OpaqueServer::OpaqueServer </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html">OpaqueServer</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ae8b06de44eef3df7e5f0091ebcc4984e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string LogCabin::RPC::OpaqueServer::bind </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLogCabin_1_1RPC_1_1Address.html">Address</a> &amp;&#160;</td>
          <td class="paramname"><em>listenAddress</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Listen on an address for new client connections. </p>
<p>You can call this multiple times to listen on multiple addresses. (But if you call this twice with the same address, the second time will always throw an error.) This method is thread-safe. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listenAddress</td><td>The TCP address on listen for new client connections. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An error message if this was not able to listen on the given address; the empty string otherwise. </dd></dl>

<p>Definition at line <a class="el" href="OpaqueServer_8cc_source.html#l00137">137</a> of file <a class="el" href="OpaqueServer_8cc_source.html">OpaqueServer.cc</a>.</p>

</div>
</div>
<a class="anchor" id="a4b02711a907427c9b50fe14bee8c33fa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void LogCabin::RPC::OpaqueServer::handleRPC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServerRPC.html">OpaqueServerRPC</a>&#160;</td>
          <td class="paramname"><em>serverRPC</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This method is overridden by a subclass and invoked when a new <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> arrives. </p>
<p>This will be called from the <a class="el" href="classLogCabin_1_1Event_1_1Loop.html" title="This class contains an event loop based on Linux&#39;s epoll interface. ">Event::Loop</a> thread, so it must return quickly. It should call <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServerRPC.html#a4e3fa8ab515370f7cc2830c65e62d8aa" title="Send the response back to the client. ">OpaqueServerRPC::sendReply()</a> if and when it wants to respond to the <a class="el" href="namespaceLogCabin_1_1RPC.html">RPC</a> request. </p>

<p>Implemented in <a class="el" href="classLogCabin_1_1RPC_1_1Server.html#aba4ad3f6448bda618a308d8e24eb0cf8">LogCabin::RPC::Server</a>.</p>

</div>
</div>
<a class="anchor" id="a4fe3567a5bb7c6c4f3742abf27161a58"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html">OpaqueServer</a>&amp; LogCabin::RPC::OpaqueServer::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html">OpaqueServer</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a class="anchor" id="a5af59d657d441cad39e66b2799c9efe0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServerRPC.html">OpaqueServerRPC</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServerRPC.html" title="This class represents the server side of a remote procedure call. ">OpaqueServerRPC</a> keeps a std::weak_ptr back to its originating <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerMessageSocket.html" title="This is a MessageSocket with callbacks set up for OpaqueServer. ">ServerMessageSocket</a>. </p>

<p>Definition at line <a class="el" href="OpaqueServer_8h_source.html#l00198">198</a> of file <a class="el" href="OpaqueServer_8h_source.html">OpaqueServer.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab2e0da8ed3e967fc08db7cd871fbc3f9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLogCabin_1_1Event_1_1Loop.html">Event::Loop</a>&amp; LogCabin::RPC::OpaqueServer::eventLoop</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The event loop that is used for non-blocking I/O. </p>

<p>Definition at line <a class="el" href="OpaqueServer_8h_source.html#l00167">167</a> of file <a class="el" href="OpaqueServer_8h_source.html">OpaqueServer.h</a>.</p>

</div>
</div>
<a class="anchor" id="acb2edeca2b4c9adaeb9c2d12f78e70d7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const uint32_t LogCabin::RPC::OpaqueServer::maxMessageLength</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The maximum number of bytes to allow per request/response. </p>

<p>Definition at line <a class="el" href="OpaqueServer_8h_source.html#l00174">174</a> of file <a class="el" href="OpaqueServer_8h_source.html">OpaqueServer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7a1d2a9cc624a8562907fd2535374c66"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::shared_ptr&lt;<a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerMessageSocket.html">ServerMessageSocket</a>&gt; &gt; LogCabin::RPC::OpaqueServer::sockets</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Every open <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerMessageSocket.html" title="This is a MessageSocket with callbacks set up for OpaqueServer. ">ServerMessageSocket</a> is referenced here so that it can be cleaned up when this <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html" title="An OpaqueServer listens for incoming RPCs over TCP connections. ">OpaqueServer</a> is destroyed. </p>
<p>The lifetime of each socket may slightly exceed the lifetime of the <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html" title="An OpaqueServer listens for incoming RPCs over TCP connections. ">OpaqueServer</a> if it is being actively used to send out a <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServerRPC.html" title="This class represents the server side of a remote procedure call. ">OpaqueServerRPC</a> response when the <a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer.html" title="An OpaqueServer listens for incoming RPCs over TCP connections. ">OpaqueServer</a> is destroyed. This may only be accessed from the <a class="el" href="classLogCabin_1_1Event_1_1Loop.html" title="This class contains an event loop based on Linux&#39;s epoll interface. ">Event::Loop</a> or while holding an <a class="el" href="classLogCabin_1_1Event_1_1Loop_1_1Lock.html" title="Lock objects are used to synchronize between the Event::Loop thread and other threads. ">Event::Loop::Lock</a>. </p>

<p>Definition at line <a class="el" href="OpaqueServer_8h_source.html#l00185">185</a> of file <a class="el" href="OpaqueServer_8h_source.html">OpaqueServer.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7af714c3605d8d1079e9c9a69128b88e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classLogCabin_1_1RPC_1_1OpaqueServer_1_1ServerTCPListener.html">ServerTCPListener</a> LogCabin::RPC::OpaqueServer::listener</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This listens for incoming TCP connections and accepts them. </p>
<p>This may only be accessed from the <a class="el" href="classLogCabin_1_1Event_1_1Loop.html" title="This class contains an event loop based on Linux&#39;s epoll interface. ">Event::Loop</a> or while holding an <a class="el" href="classLogCabin_1_1Event_1_1Loop_1_1Lock.html" title="Lock objects are used to synchronize between the Event::Loop thread and other threads. ">Event::Loop::Lock</a>. </p>

<p>Definition at line <a class="el" href="OpaqueServer_8h_source.html#l00192">192</a> of file <a class="el" href="OpaqueServer_8h_source.html">OpaqueServer.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>RPC/<a class="el" href="OpaqueServer_8h_source.html">OpaqueServer.h</a></li>
<li>RPC/<a class="el" href="OpaqueServer_8cc_source.html">OpaqueServer.cc</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Nov 14 2014 13:49:45 for LogCabin by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
